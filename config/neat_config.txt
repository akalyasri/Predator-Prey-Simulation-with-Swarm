# All parameters used are directly referenced from:
# NEAT-Python official docs: https://neat-python.readthedocs.io/en/latest/config_file.html
# NEAT-Python examples (CartPole, XOR): https://github.com/CodeReclaimers/neat-python/tree/master/examples
# Stanley & Miikkulainen (2002): sections 3.2-3.4 on mutation rates, speciation, and structural growth

[NEAT]
# Core evolution settings - top level
pop_size              = 100
fitness_criterion     = max

# increased threshold from 1000 to 3000 to force evolution
fitness_threshold     = 3000    
reset_on_extinction   = True
no_fitness_termination = False

# Optional: fixes randomization for reproducibility -> for consistent results
seed = 42

[DefaultGenome]
# Neural network structure and mutation rules - how each agent’s brain evolves

# example: relative x, y, wall dist, bias
num_inputs             = 6      

# velocity x, y
num_outputs            = 2       

# optional: start with 0 so neat can add layers later
num_hidden             = 0       

# optional: prevents recurrent loops -> simpler and stable for our simulation
feed_forward           = True    

#optional: gives neat a functioning network immediately
initial_connection     = full_nodirect  

# Activation options

# default node activation function
activation_default     = tanh                   

# optional: adds diversity
activation_mutate_rate = 0.1   

# optional: adds flexibility - functions neat can choose from                
activation_options     = tanh sigmoid relu      

# Aggregation options   

# optional: how inputs to a node are combined - "sum" is standard
aggregation_default    = sum        
aggregation_mutate_rate = 0.0       
aggregation_options    = sum

# Node bias parameters - controls how neat mutates the internal connection weights and biases
# Can leave these defaults out but including them gives us explicit control and reproducibility
bias_init_mean         = 0.0
bias_init_stdev        = 1.0
bias_init_type         = gaussian
bias_mutate_power      = 0.5
bias_mutate_rate       = 0.7
bias_replace_rate      = 0.1
bias_min_value         = -5.0
bias_max_value         = 5.0

# Weight parameters 
weight_init_mean       = 0.0
weight_init_stdev      = 1.0
weight_init_type       = gaussian
weight_mutate_power    = 0.5
weight_mutate_rate     = 0.8
weight_replace_rate    = 0.1
weight_min_value       = -5.0
weight_max_value       = 5.0


# Connection enabled/disabled mutation settings - needed to run code
enabled_default = True
enabled_mutate_rate = 0.01
enabled_rate_to_false_add = 0.0
enabled_rate_to_true_add = 0.0

# Structural mutation - defines how topology changes -> how neat adds/removes connections or nodes
node_add_prob          = 0.05
node_delete_prob       = 0.01
conn_add_prob          = 0.2
conn_delete_prob       = 0.05
single_structural_mutation = False
structural_mutation_surer   = default

# Compatibility coefficients - how neat decides species similarity -> needed for neat speciation
compatibility_disjoint_coefficient = 1.0
compatibility_weight_coefficient   = 0.5


# Response multiplier parameters - needed in order to run code
response_init_mean = 1.0
response_init_stdev = 0.0
response_init_type = gaussian
response_max_value = 30.0
response_min_value = -30.0
response_mutate_power = 0.0
response_mutate_rate = 0.0
response_replace_rate = 0.0

[DefaultSpeciesSet] 
# Speciation settings - controls how genomes are grouped into species -> new structures are compared to existing ones; if they’re too different, they form a new species
compatibility_threshold = 3.0

[DefaultStagnation]
# Species stagnation control - removes species that stop improving -> neat kills them off after several generations
species_fitness_func = max
max_stagnation       = 15
species_elitism      = 2

[DefaultReproduction]
# Reproduction settings - how offspring are generated -> controls how many predators survive
elitism             = 2
survival_threshold  = 0.3
min_species_size    = 2
